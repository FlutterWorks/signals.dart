/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ae=["require","exports","vs/base/common/platform","vs/base/common/strings","vs/base/common/path","vs/base/common/extpath","vs/base/common/uri","vs/base/common/resources","vs/base/common/async","vs/base/common/glob","vs/base/common/symbols","vs/base/common/network","vs/base/common/errors","vs/base/common/cancellation","vs/workbench/services/search/common/getFileResults","vs/workbench/services/search/common/ignoreFile","vs/base/common/types","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/lazy","vs/base/common/arrays","vs/base/common/map","vs/editor/common/core/range","vs/workbench/services/search/worker/localFileSearch"],oe=function(re){for(var e=[],E=0,O=re.length;E<O;E++)e[E]=ae[re[E]];return e};define(ae[10],oe([0,1]),function(re,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$2d=void 0,e.$2d=Symbol("MicrotaskDelay")}),define(ae[5],oe([0,1,4,2,3,16]),function(re,e,E,O,H,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$ng=e.$mg=e.$lg=e.$kg=e.$jg=e.$ig=e.$hg=e.$gg=e.$fg=e.$eg=e.$dg=e.$cg=e.$bg=e.$ag=e.$_f=e.$$f=void 0;function $(s){return s===47||s===92}e.$$f=$;function M(s){return s.replace(/[\\/]/g,E.$gc.sep)}e.$_f=M;function B(s){return s.indexOf("/")===-1&&(s=M(s)),/^[a-zA-Z]:(\/|$)/.test(s)&&(s="/"+s),s}e.$ag=B;function X(s,o=E.$gc.sep){if(!s)return"";const C=s.length,S=s.charCodeAt(0);if($(S)){if($(s.charCodeAt(1))&&!$(s.charCodeAt(2))){let W=3;const Y=W;for(;W<C&&!$(s.charCodeAt(W));W++);if(Y!==W&&!$(s.charCodeAt(W+1))){for(W+=1;W<C;W++)if($(s.charCodeAt(W)))return s.slice(0,W+1).replace(/[\\/]/g,o)}}return o}else if(R(S)&&s.charCodeAt(1)===58)return $(s.charCodeAt(2))?s.slice(0,2)+o:s.slice(0,2);let V=s.indexOf("://");if(V!==-1){for(V+=3;V<C;V++)if($(s.charCodeAt(V)))return s.slice(0,V+1)}return""}e.$bg=X;function F(s){if(!O.$i||!s||s.length<5)return!1;let o=s.charCodeAt(0);if(o!==92||(o=s.charCodeAt(1),o!==92))return!1;let C=2;const S=C;for(;C<s.length&&(o=s.charCodeAt(C),o!==92);C++);return!(S===C||(o=s.charCodeAt(C+1),isNaN(o)||o===92))}e.$cg=F;const G=/[\\/:\*\?"<>\|]/g,w=/[\\/]/g,f=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function n(s,o=O.$i){const C=o?G:w;return!(!s||s.length===0||/^\s+$/.test(s)||(C.lastIndex=0,C.test(s))||o&&f.test(s)||s==="."||s===".."||o&&s[s.length-1]==="."||o&&s.length!==s.trim().length||s.length>255)}e.$dg=n;function u(s,o,C){const S=s===o;return!C||S?S:!s||!o?!1:(0,H.$jf)(s,o)}e.$eg=u;function m(s,o,C,S=E.sep){if(s===o)return!0;if(!s||!o||o.length>s.length)return!1;if(C){if(!(0,H.$kf)(s,o))return!1;if(o.length===s.length)return!0;let W=o.length;return o.charAt(o.length-1)===S&&W--,s.charAt(W)===S}return o.charAt(o.length-1)!==S&&(o+=S),s.indexOf(o)===0}e.$fg=m;function R(s){return s>=65&&s<=90||s>=97&&s<=122}e.$gg=R;function D(s,o){return O.$i&&s.endsWith(":")&&(s+=E.sep),(0,E.$ic)(s)||(s=(0,E.$jc)(o,s)),s=(0,E.$hc)(s),O.$i?(s=(0,H.$4e)(s,E.sep),s.endsWith(":")&&(s+=E.sep)):(s=(0,H.$4e)(s,E.sep),s||(s=E.sep)),s}e.$hg=D;function b(s){const o=(0,E.$hc)(s);return O.$i?s.length>3?!1:Q(o)&&(s.length===2||o.charCodeAt(2)===92):o===E.$gc.sep}e.$ig=b;function Q(s,o=O.$i){return o?R(s.charCodeAt(0))&&s.charCodeAt(1)===58:!1}e.$jg=Q;function ne(s,o=O.$i){return Q(s,o)?s[0]:void 0}e.$kg=ne;function j(s,o,C){return o.length>s.length?-1:s===o?0:(C&&(s=s.toLowerCase(),o=o.toLowerCase()),s.indexOf(o))}e.$lg=j;function U(s){const o=s.split(":");let C,S,V;for(const W of o){const Y=Number(W);(0,v.$Wf)(Y)?S===void 0?S=Y:V===void 0&&(V=Y):C=C?[C,W].join(":"):W}if(!C)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:C,line:S!==void 0?S:void 0,column:V!==void 0?V:S!==void 0?1:void 0}}e.$mg=U;const I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Z="BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789";function _(s,o,C=8){let S="";for(let W=0;W<C;W++){let Y;W===0&&O.$i&&!o&&(C===3||C===4)?Y=Z:Y=I,S+=Y.charAt(Math.floor(Math.random()*Y.length))}let V;return o?V=`${o}-${S}`:V=S,s?(0,E.$jc)(s,V):V}e.$ng=_}),define(ae[11],oe([0,1,12,2,3,6]),function(re,e,E,O,H,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.$yg=e.$xg=e.$wg=e.$vg=e.$ug=e.$tg=e.$sg=e.$rg=e.$qg=e.$pg=e.$og=e.Schemas=void 0;var $;(function(w){w.inMemory="inmemory",w.vscode="vscode",w.internal="private",w.walkThrough="walkThrough",w.walkThroughSnippet="walkThroughSnippet",w.http="http",w.https="https",w.file="file",w.mailto="mailto",w.untitled="untitled",w.data="data",w.command="command",w.vscodeRemote="vscode-remote",w.vscodeRemoteResource="vscode-remote-resource",w.vscodeManagedRemoteResource="vscode-managed-remote-resource",w.vscodeUserData="vscode-userdata",w.vscodeCustomEditor="vscode-custom-editor",w.vscodeNotebookCell="vscode-notebook-cell",w.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",w.vscodeNotebookCellOutput="vscode-notebook-cell-output",w.vscodeInteractiveInput="vscode-interactive-input",w.vscodeSettings="vscode-settings",w.vscodeWorkspaceTrust="vscode-workspace-trust",w.vscodeTerminal="vscode-terminal",w.vscodeChatCodeBlock="vscode-chat-code-block",w.vscodeChatSesssion="vscode-chat-editor",w.webviewPanel="webview-panel",w.vscodeWebview="vscode-webview",w.extension="extension",w.vscodeFileResource="vscode-file",w.tmp="tmp",w.vsls="vsls",w.vscodeSourceControl="vscode-scm",w.codeSetting="code-setting",w.codeFeature="code-feature"})($||(e.Schemas=$={}));function M(w,f){return v.URI.isUri(w)?(0,H.$jf)(w.scheme,f):(0,H.$kf)(w,f+":")}e.$og=M;function B(w,...f){return f.some(n=>M(w,n))}e.$pg=B,e.$qg="vscode-tkn",e.$rg="tkn";class X{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f=`/${$.vscodeRemoteResource}`}setPreferredWebSchema(f){this.d=f}setDelegate(f){this.e=f}setServerRootPath(f){this.f=`${f}/${$.vscodeRemoteResource}`}set(f,n,u){this.a[f]=n,this.b[f]=u}setConnectionToken(f,n){this.c[f]=n}getPreferredWebSchema(){return this.d}rewrite(f){if(this.e)try{return this.e(f)}catch(b){return E.$1(b),f}const n=f.authority;let u=this.a[n];u&&u.indexOf(":")!==-1&&u.indexOf("[")===-1&&(u=`[${u}]`);const m=this.b[n],R=this.c[n];let D=`path=${encodeURIComponent(f.path)}`;return typeof R=="string"&&(D+=`&${e.$rg}=${encodeURIComponent(R)}`),v.URI.from({scheme:O.$o?this.d:$.vscodeRemoteResource,authority:`${u}:${m}`,path:this.f,query:D})}}e.$sg=new X,e.$tg="vs/../../extensions",e.$ug="vs/../../node_modules",e.$vg="vs/../../node_modules.asar",e.$wg="vs/../../node_modules.asar.unpacked",e.$xg="vscode-app";class F{static{this.a=e.$xg}asBrowserUri(f){const n=this.b(f,re);return this.uriToBrowserUri(n)}uriToBrowserUri(f){return f.scheme===$.vscodeRemote?e.$sg.rewrite(f):f.scheme===$.file&&(O.$m||O.$q===`${$.vscodeFileResource}://${F.a}`)?f.with({scheme:$.vscodeFileResource,authority:f.authority||F.a,query:null,fragment:null}):f}asFileUri(f){const n=this.b(f,re);return this.uriToFileUri(n)}uriToFileUri(f){return f.scheme===$.vscodeFileResource?f.with({scheme:$.file,authority:f.authority!==F.a?f.authority:null,query:null,fragment:null}):f}b(f,n){return v.URI.isUri(f)?f:v.URI.parse(n.toUrl(f))}}e.$yg=new F;var G;(function(w){const f=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);w.CoopAndCoep=Object.freeze(f.get("3"));const n="vscode-coi";function u(R){let D;typeof R=="string"?D=new URL(R).searchParams:R instanceof URL?D=R.searchParams:v.URI.isUri(R)&&(D=new URL(R.toString(!0)).searchParams);const b=D?.get(n);if(b)return f.get(b)}w.getHeadersFromQuery=u;function m(R,D,b){if(!globalThis.crossOriginIsolated)return;const Q=D&&b?"3":b?"2":"1";R instanceof URLSearchParams?R.set(n,Q):R[n]=Q}w.addSearchParam=m})(G||(e.COI=G={}))}),define(ae[7],oe([0,1,5,11,4,2,3,6]),function(re,e,E,O,H,v,$,M){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$2g=e.DataUri=e.$1g=e.$Zg=e.$Yg=e.$Xg=e.$Wg=e.$Vg=e.$Ug=e.$Tg=e.$Sg=e.$Rg=e.$Qg=e.$Pg=e.$Og=e.$Ng=e.$Mg=e.$Lg=e.$Kg=e.$Jg=e.$Ig=e.$Hg=e.$Gg=e.$Fg=void 0;function B(f){return(0,M.$wc)(f,!0)}e.$Fg=B;class X{constructor(n){this.a=n}compare(n,u,m=!1){return n===u?0:(0,$.$cf)(this.getComparisonKey(n,m),this.getComparisonKey(u,m))}isEqual(n,u,m=!1){return n===u?!0:!n||!u?!1:this.getComparisonKey(n,m)===this.getComparisonKey(u,m)}getComparisonKey(n,u=!1){return n.with({path:this.a(n)?n.path.toLowerCase():void 0,fragment:u?null:void 0}).toString()}ignorePathCasing(n){return this.a(n)}isEqualOrParent(n,u,m=!1){if(n.scheme===u.scheme){if(n.scheme===O.Schemas.file)return E.$fg(B(n),B(u),this.a(n))&&n.query===u.query&&(m||n.fragment===u.fragment);if((0,e.$Wg)(n.authority,u.authority))return E.$fg(n.path,u.path,this.a(n),"/")&&n.query===u.query&&(m||n.fragment===u.fragment)}return!1}joinPath(n,...u){return M.URI.joinPath(n,...u)}basenameOrAuthority(n){return(0,e.$Og)(n)||n.authority}basename(n){return H.$gc.basename(n.path)}extname(n){return H.$gc.extname(n.path)}dirname(n){if(n.path.length===0)return n;let u;return n.scheme===O.Schemas.file?u=M.URI.file(H.$mc(B(n))).path:(u=H.$gc.dirname(n.path),n.authority&&u.length&&u.charCodeAt(0)!==47&&(console.error(`dirname("${n.toString})) resulted in a relative path`),u="/")),n.with({path:u})}normalizePath(n){if(!n.path.length)return n;let u;return n.scheme===O.Schemas.file?u=M.URI.file(H.$hc(B(n))).path:u=H.$gc.normalize(n.path),n.with({path:u})}relativePath(n,u){if(n.scheme!==u.scheme||!(0,e.$Wg)(n.authority,u.authority))return;if(n.scheme===O.Schemas.file){const D=H.$lc(B(n),B(u));return v.$i?E.$_f(D):D}let m=n.path||"/";const R=u.path||"/";if(this.a(n)){let D=0;for(const b=Math.min(m.length,R.length);D<b&&!(m.charCodeAt(D)!==R.charCodeAt(D)&&m.charAt(D).toLowerCase()!==R.charAt(D).toLowerCase());D++);m=R.substr(0,D)+m.substr(D)}return H.$gc.relative(m,R)}resolvePath(n,u){if(n.scheme===O.Schemas.file){const m=M.URI.file(H.$kc(B(n),u));return n.with({authority:m.authority,path:m.path})}return u=E.$ag(u),n.with({path:H.$gc.resolve(n.path,u)})}isAbsolutePath(n){return!!n.path&&n.path[0]==="/"}isEqualAuthority(n,u){return n===u||n!==void 0&&u!==void 0&&(0,$.$jf)(n,u)}hasTrailingPathSeparator(n,u=H.sep){if(n.scheme===O.Schemas.file){const m=B(n);return m.length>E.$bg(m).length&&m[m.length-1]===u}else{const m=n.path;return m.length>1&&m.charCodeAt(m.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(n.fsPath)}}removeTrailingPathSeparator(n,u=H.sep){return(0,e.$Xg)(n,u)?n.with({path:n.path.substr(0,n.path.length-1)}):n}addTrailingPathSeparator(n,u=H.sep){let m=!1;if(n.scheme===O.Schemas.file){const R=B(n);m=R!==void 0&&R.length===E.$bg(R).length&&R[R.length-1]===u}else{u="/";const R=n.path;m=R.length===1&&R.charCodeAt(R.length-1)===47}return!m&&!(0,e.$Xg)(n,u)?n.with({path:n.path+"/"}):n}}e.$Gg=X,e.$Hg=new X(()=>!1),e.$Ig=new X(f=>f.scheme===O.Schemas.file?!v.$k:!0),e.$Jg=new X(f=>!0),e.$Kg=e.$Hg.isEqual.bind(e.$Hg),e.$Lg=e.$Hg.isEqualOrParent.bind(e.$Hg),e.$Mg=e.$Hg.getComparisonKey.bind(e.$Hg),e.$Ng=e.$Hg.basenameOrAuthority.bind(e.$Hg),e.$Og=e.$Hg.basename.bind(e.$Hg),e.$Pg=e.$Hg.extname.bind(e.$Hg),e.$Qg=e.$Hg.dirname.bind(e.$Hg),e.$Rg=e.$Hg.joinPath.bind(e.$Hg),e.$Sg=e.$Hg.normalizePath.bind(e.$Hg),e.$Tg=e.$Hg.relativePath.bind(e.$Hg),e.$Ug=e.$Hg.resolvePath.bind(e.$Hg),e.$Vg=e.$Hg.isAbsolutePath.bind(e.$Hg),e.$Wg=e.$Hg.isEqualAuthority.bind(e.$Hg),e.$Xg=e.$Hg.hasTrailingPathSeparator.bind(e.$Hg),e.$Yg=e.$Hg.removeTrailingPathSeparator.bind(e.$Hg),e.$Zg=e.$Hg.addTrailingPathSeparator.bind(e.$Hg);function F(f,n){const u=[];for(let m=0;m<f.length;m++){const R=n(f[m]);f.some((D,b)=>b===m?!1:(0,e.$Lg)(R,n(D)))||u.push(f[m])}return u}e.$1g=F;var G;(function(f){f.META_DATA_LABEL="label",f.META_DATA_DESCRIPTION="description",f.META_DATA_SIZE="size",f.META_DATA_MIME="mime";function n(u){const m=new Map;u.path.substring(u.path.indexOf(";")+1,u.path.lastIndexOf(";")).split(";").forEach(b=>{const[Q,ne]=b.split(":");Q&&ne&&m.set(Q,ne)});const D=u.path.substring(0,u.path.indexOf(";"));return D&&m.set(f.META_DATA_MIME,D),m}f.parseMetaData=n})(G||(e.DataUri=G={}));function w(f,n,u){if(n){let m=f.path;return m&&m[0]!==H.$gc.sep&&(m=H.$gc.sep+m),f.with({scheme:u,authority:n,path:m})}return f.with({scheme:u})}e.$2g=w}),define(ae[8],oe([0,1,13,12,17,18,7,2,10,19]),function(re,e,E,O,H,v,$,M,B,X){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Hh=e.$Gh=e.$Fh=e.$Eh=e.$Dh=e.$Ch=e.Promises=e.$Bh=e.$Ah=e.$zh=e.$yh=e.$xh=e.$wh=e.$vh=e.$uh=e.$th=e.$sh=e.$rh=e.$qh=e.$ph=e.$oh=e.$nh=e.$mh=e.$lh=e.$kh=e.$jh=e.$ih=e.$hh=e.$gh=e.$fh=e.$eh=e.$dh=e.$ch=e.$bh=e.$ah=e.$_g=e.$$g=e.$0g=e.$9g=e.$8g=e.$7g=e.$6g=e.$5g=e.$4g=e.$3g=void 0;function F(l){return!!l&&typeof l.then=="function"}e.$3g=F;function G(l){const t=new E.$ce,i=l(t.token),r=new Promise((h,A)=>{const x=t.token.onCancellationRequested(()=>{x.dispose(),A(new O.$5)});Promise.resolve(i).then(te=>{x.dispose(),t.dispose(),h(te)},te=>{x.dispose(),t.dispose(),A(te)})});return new class{cancel(){t.cancel(),t.dispose()}then(h,A){return r.then(h,A)}catch(h){return this.then(void 0,h)}finally(h){return r.finally(h)}}}e.$4g=G;function w(l,t,i){return new Promise((r,h)=>{const A=t.onCancellationRequested(()=>{A.dispose(),r(i)});l.then(r,h).finally(()=>A.dispose())})}e.$5g=w;function f(l,t){return new Promise((i,r)=>{const h=t.onCancellationRequested(()=>{h.dispose(),r(new O.$5)});l.then(i,r).finally(()=>h.dispose())})}e.$6g=f;async function n(l){let t=-1;const i=l.map((r,h)=>r.then(A=>(t=h,A)));try{return await Promise.race(i)}finally{l.forEach((r,h)=>{h!==t&&r.cancel()})}}e.$7g=n;function u(l,t,i){let r;const h=setTimeout(()=>{r?.(void 0),i?.()},t);return Promise.race([l.finally(()=>clearTimeout(h)),new Promise(A=>r=A)])}e.$8g=u;function m(l){return new Promise((t,i)=>{const r=l();F(r)?r.then(t,i):t(r)})}e.$9g=m;function R(){let l,t;return{promise:new Promise((r,h)=>{l=r,t=h}),resolve:l,reject:t}}e.$0g=R;class D{constructor(){this.f=!1,this.a=null,this.b=null,this.d=null}queue(t){if(this.f)return Promise.reject(new Error("Throttler is disposed"));if(this.a){if(this.d=t,!this.b){const i=()=>{if(this.b=null,this.f)return;const r=this.queue(this.d);return this.d=null,r};this.b=new Promise(r=>{this.a.then(i,i).then(r)})}return new Promise((i,r)=>{this.b.then(i,r)})}return this.a=t(),new Promise((i,r)=>{this.a.then(h=>{this.a=null,i(h)},h=>{this.a=null,r(h)})})}dispose(){this.f=!0}}e.$$g=D;class b{constructor(){this.a=Promise.resolve(null)}queue(t){return this.a=this.a.then(()=>t(),()=>t())}}e.$_g=b;class Q{constructor(){this.a=new Map}queue(t,i){const h=(this.a.get(t)??Promise.resolve()).catch(()=>{}).then(i).finally(()=>{this.a.get(t)===h&&this.a.delete(t)});return this.a.set(t,h),h}}e.$ah=Q;const ne=(l,t)=>{let i=!0;const r=setTimeout(()=>{i=!1,t()},l);return{isTriggered:()=>i,dispose:()=>{clearTimeout(r),i=!1}}},j=l=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,l())}),{isTriggered:()=>t,dispose:()=>{t=!1}}};class U{constructor(t){this.defaultDelay=t,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(t,i=this.defaultDelay){this.g=t,this.h(),this.b||(this.b=new Promise((h,A)=>{this.d=h,this.f=A}).then(()=>{if(this.b=null,this.d=null,this.g){const h=this.g;return this.g=null,h()}}));const r=()=>{this.a=null,this.d?.(null)};return this.a=i===B.$2d?j(r):ne(i,r),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new O.$5),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}}e.$bh=U;class I{constructor(t){this.a=new U(t),this.b=new D}trigger(t,i){return this.a.trigger(()=>this.b.queue(t),i)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose(),this.b.dispose()}}e.$ch=I;class Z{constructor(){this.a=!1,this.b=new Promise((t,i)=>{this.d=t})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}}e.$dh=Z;class _ extends Z{constructor(t){super(),this.f=setTimeout(()=>this.open(),t)}open(){clearTimeout(this.f),super.open()}}e.$eh=_;function s(l,t){return t?new Promise((i,r)=>{const h=setTimeout(()=>{A.dispose(),i()},l),A=t.onCancellationRequested(()=>{clearTimeout(h),A.dispose(),r(new O.$5)})}):G(i=>s(l,i))}e.$fh=s;function o(l,t=0,i){const r=setTimeout(()=>{l(),i&&h.dispose()},t),h=(0,v.$Rc)(()=>{clearTimeout(r),i?.deleteAndLeak(h)});return i?.add(h),h}e.$gh=o;function C(l){const t=[];let i=0;const r=l.length;function h(){return i<r?l[i++]():null}function A(x){x!=null&&t.push(x);const te=h();return te?te.then(A):Promise.resolve(t)}return Promise.resolve(null).then(A)}e.$hh=C;function S(l,t=r=>!!r,i=null){let r=0;const h=l.length,A=()=>{if(r>=h)return Promise.resolve(i);const x=l[r++];return Promise.resolve(x()).then(de=>t(de)?Promise.resolve(de):A())};return A()}e.$ih=S;function V(l,t=r=>!!r,i=null){if(l.length===0)return Promise.resolve(i);let r=l.length;const h=()=>{r=-1;for(const A of l)A.cancel?.()};return new Promise((A,x)=>{for(const te of l)te.then(de=>{--r>=0&&t(de)?(h(),A(de)):r===0&&A(i)}).catch(de=>{--r>=0&&(h(),x(de))})})}e.$jh=V;class W{constructor(t){this.a=0,this.b=!1,this.f=t,this.g=[],this.d=0,this.h=new H.$5d}whenIdle(){return this.size>0?H.Event.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this.h.event}get size(){return this.a}queue(t){if(this.b)throw new Error("Object has been disposed");return this.a++,new Promise((i,r)=>{this.g.push({factory:t,c:i,e:r}),this.j()})}j(){for(;this.g.length&&this.d<this.f;){const t=this.g.shift();this.d++;const i=t.factory();i.then(t.c,t.e),i.then(()=>this.k(),()=>this.k())}}k(){this.b||(this.d--,--this.a===0&&this.h.fire(),this.g.length>0&&this.j())}clear(){if(this.b)throw new Error("Object has been disposed");this.g.length=0,this.a=this.d}dispose(){this.b=!0,this.g.length=0,this.a=0,this.h.dispose()}}e.$kh=W;class Y extends W{constructor(){super(1)}}e.$lh=Y;class ue{constructor(){this.a=new P,this.b=0}queue(t){return this.a.isRunning()?this.a.queue(()=>this.a.run(this.b++,t())):this.a.run(this.b++,t())}}e.$mh=ue;class le{constructor(){this.a=new Map,this.b=new Set,this.d=void 0,this.f=0}async whenDrained(){if(this.g())return;const t=new z;return this.b.add(t),t.p}g(){for(const[,t]of this.a)if(t.size>0)return!1;return!0}queueSize(t,i=$.$Hg){const r=i.getComparisonKey(t);return this.a.get(r)?.size??0}queueFor(t,i,r=$.$Hg){const h=r.getComparisonKey(t);let A=this.a.get(h);if(!A){A=new Y;const x=this.f++,te=H.Event.once(A.onDrained)(()=>{A?.dispose(),this.a.delete(h),this.h(),this.d?.deleteAndDispose(x),this.d?.size===0&&(this.d.dispose(),this.d=void 0)});this.d||(this.d=new v.$3c),this.d.set(x,te),this.a.set(h,A)}return A.queue(i)}h(){this.g()&&this.j()}j(){for(const t of this.b)t.complete();this.b.clear()}dispose(){for(const[,t]of this.a)t.dispose();this.a.clear(),this.j(),this.d?.dispose()}}e.$nh=le;class ie{constructor(t,i){this.a=-1,typeof t=="function"&&typeof i=="number"&&this.setIfNotSet(t,i)}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearTimeout(this.a),this.a=-1)}cancelAndSet(t,i){this.cancel(),this.a=setTimeout(()=>{this.a=-1,t()},i)}setIfNotSet(t,i){this.a===-1&&(this.a=setTimeout(()=>{this.a=-1,t()},i))}}e.$oh=ie;class he{constructor(){this.d=void 0}cancel(){this.d?.dispose(),this.d=void 0}cancelAndSet(t,i,r=globalThis){this.cancel();const h=r.setInterval(()=>{t()},i);this.d=(0,v.$Rc)(()=>{r.clearInterval(h),this.d=void 0})}dispose(){this.cancel()}}e.$ph=he;class N{constructor(t,i){this.b=-1,this.a=t,this.d=i,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(t=this.d){this.cancel(),this.b=setTimeout(this.f,t)}get delay(){return this.d}set delay(t){this.d=t}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}}e.$qh=N;class ee{constructor(t,i){i%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${i}ms is not a multiple of 1000ms.`),this.a=t,this.b=i,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(t=this.b){t%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${t}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(t/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}}e.$rh=ee;class J extends N{constructor(t,i){super(t,i),this.j=[]}work(t){this.j.push(t),this.isScheduled()||this.schedule()}h(){const t=this.j;this.j=[],this.a?.(t)}dispose(){this.j=[],super.dispose()}}e.$sh=J;class ce extends v.$Tc{constructor(t,i){super(),this.g=t,this.h=i,this.a=[],this.b=this.B(new v.$Uc),this.f=!1}get pending(){return this.a.length}work(t){if(this.f)return!1;if(typeof this.g.maxBufferedWork=="number"){if(this.b.value){if(this.pending+t.length>this.g.maxBufferedWork)return!1}else if(this.pending+t.length-this.g.maxWorkChunkSize>this.g.maxBufferedWork)return!1}for(const i of t)this.a.push(i);return this.b.value||this.j(),!0}j(){this.h(this.a.splice(0,this.g.maxWorkChunkSize)),this.a.length>0&&(this.b.value=new N(()=>{this.b.clear(),this.j()},this.g.throttleDelay),this.b.value.schedule())}dispose(){super.dispose(),this.f=!0}}e.$th=ce,function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?e.$vh=(l,t)=>{(0,M.$B)(()=>{if(i)return;const r=Date.now()+15;t(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,r-Date.now())}}))});let i=!1;return{dispose(){i||(i=!0)}}}:e.$vh=(l,t,i)=>{const r=l.requestIdleCallback(t,typeof i=="number"?{timeout:i}:void 0);let h=!1;return{dispose(){h||(h=!0,l.cancelIdleCallback(r))}}},e.$uh=l=>(0,e.$vh)(globalThis,l)}();class a{constructor(t,i){this.g=!1,this.d=()=>{try{this.j=i()}catch(r){this.l=r}finally{this.g=!0}},this.f=(0,e.$vh)(t,()=>this.d())}dispose(){this.f.dispose()}get value(){if(this.g||(this.f.dispose(),this.d()),this.l)throw this.l;return this.j}get isInitialized(){return this.g}}e.$wh=a;class d extends a{constructor(t){super(globalThis,t)}}e.$xh=d;async function c(l,t,i){let r;for(let h=0;h<i;h++)try{return await l()}catch(A){r=A,await s(t)}throw r}e.$yh=c;class P{isRunning(t){return typeof t=="number"?this.a?.taskId===t:!!this.a}get running(){return this.a?.promise}cancelRunning(){this.a?.cancel()}run(t,i,r){return this.a={taskId:t,cancel:()=>r?.(),promise:i},i.then(()=>this.d(t),()=>this.d(t)),i}d(t){this.a&&t===this.a.taskId&&(this.a=void 0,this.f())}f(){if(this.b){const t=this.b;this.b=void 0,t.run().then(t.promiseResolve,t.promiseReject)}}queue(t){if(this.b)this.b.run=t;else{const{promise:i,resolve:r,reject:h}=R();this.b={run:t,promise:i,promiseResolve:r,promiseReject:h}}return this.b.promise}hasQueued(){return!!this.b}async join(){return this.b?.promise??this.a?.promise}}e.$zh=P;class y{constructor(t,i=()=>Date.now()){this.d=t,this.f=i,this.a=0,this.b=0}increment(){const t=this.f();return t-this.a>this.d&&(this.a=t,this.b=0),this.b++,this.b}}e.$Ah=y;var T;(function(l){l[l.Resolved=0]="Resolved",l[l.Rejected=1]="Rejected"})(T||(T={}));class z{get isRejected(){return this.d?.outcome===1}get isResolved(){return this.d?.outcome===0}get isSettled(){return!!this.d}get value(){return this.d?.outcome===0?this.d?.value:void 0}constructor(){this.p=new Promise((t,i)=>{this.a=t,this.b=i})}complete(t){return new Promise(i=>{this.a(t),this.d={outcome:0,value:t},i()})}error(t){return new Promise(i=>{this.b(t),this.d={outcome:1,value:t},i()})}cancel(){return this.error(new O.$5)}}e.$Bh=z;var g;(function(l){async function t(r){let h;const A=await Promise.all(r.map(x=>x.then(te=>te,te=>{h||(h=te)})));if(typeof h<"u")throw h;return A}l.settled=t;function i(r){return new Promise(async(h,A)=>{try{await r(h,A)}catch(x){A(x)}})}l.withAsyncBody=i})(g||(e.Promises=g={}));class k{get value(){return this.a}get error(){return this.b}get isResolved(){return this.d}constructor(t){this.a=void 0,this.b=void 0,this.d=!1,this.promise=t.then(i=>(this.a=i,this.d=!0,i),i=>{throw this.b=i,this.d=!0,i})}requireValue(){if(!this.d)throw new O.$cb("Promise is not resolved yet");if(this.b)throw this.b;return this.a}}e.$Ch=k;class K{constructor(t){this.b=t,this.a=new X.$V(()=>new k(this.b()))}requireValue(){return this.a.value.requireValue()}getPromise(){return this.a.value.promise}get currentValue(){return this.a.rawValue?.value}}e.$Dh=K;var q;(function(l){l[l.Initial=0]="Initial",l[l.DoneOK=1]="DoneOK",l[l.DoneError=2]="DoneError"})(q||(q={}));class L{static fromArray(t){return new L(i=>{i.emitMany(t)})}static fromPromise(t){return new L(async i=>{i.emitMany(await t)})}static fromPromises(t){return new L(async i=>{await Promise.all(t.map(async r=>i.emitOne(await r)))})}static merge(t){return new L(async i=>{await Promise.all(t.map(async r=>{for await(const h of r)i.emitOne(h)}))})}static{this.EMPTY=L.fromArray([])}constructor(t){this.a=0,this.b=[],this.d=null,this.f=new H.$5d,queueMicrotask(async()=>{const i={emitOne:r=>this.g(r),emitMany:r=>this.h(r),reject:r=>this.k(r)};try{await Promise.resolve(t(i)),this.j()}catch(r){this.k(r)}finally{i.emitOne=void 0,i.emitMany=void 0,i.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===1)return{done:!0,value:void 0};await H.Event.toPromise(this.f.event)}while(!0)}}}static map(t,i){return new L(async r=>{for await(const h of t)r.emitOne(i(h))})}map(t){return L.map(this,t)}static filter(t,i){return new L(async r=>{for await(const h of t)i(h)&&r.emitOne(h)})}filter(t){return L.filter(this,t)}static coalesce(t){return L.filter(t,i=>!!i)}coalesce(){return L.coalesce(this)}static async toPromise(t){const i=[];for await(const r of t)i.push(r);return i}toPromise(){return L.toPromise(this)}g(t){this.a===0&&(this.b.push(t),this.f.fire())}h(t){this.a===0&&(this.b=this.b.concat(t),this.f.fire())}j(){this.a===0&&(this.a=1,this.f.fire())}k(t){this.a===0&&(this.a=2,this.d=t,this.f.fire())}}e.$Eh=L;class p extends L{constructor(t,i){super(i),this.l=t}cancel(){this.l.cancel()}}e.$Fh=p;function se(l){const t=new E.$ce,i=l(t.token);return new p(t,async r=>{const h=t.token.onCancellationRequested(()=>{h.dispose(),t.dispose(),r.reject(new O.$5)});try{for await(const A of i){if(t.token.isCancellationRequested)return;r.emitOne(A)}h.dispose(),t.dispose()}catch(A){h.dispose(),t.dispose(),r.reject(A)}})}e.$Gh=se;class fe{constructor(){this.a=new z,this.b=new L(r=>{if(t){r.reject(t);return}return i&&r.emitMany(i),this.d=h=>r.reject(h),this.f=h=>r.emitOne(h),this.a.p});let t,i;this.f=r=>{i||(i=[]),i.push(r)},this.d=r=>{t||(t=r)}}get asyncIterable(){return this.b}resolve(){this.a.complete()}reject(t){this.d(t),this.a.complete()}emitOne(t){this.f(t)}}e.$Hh=fe}),define(ae[9],oe([0,1,20,8,5,21,4,2,3]),function(re,e,E,O,H,v,$,M,B){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$2j=e.$1j=e.$Zj=e.$Yj=e.$Xj=e.$Wj=e.$Vj=e.$Uj=e.$Tj=e.$Sj=void 0;function X(){return Object.create(null)}e.$Sj=X,e.$Tj="**",e.$Uj="/";const F="[/\\\\]",G="[^/\\\\]",w=/\//g;function f(a,d){switch(a){case 0:return"";case 1:return`${G}*?`;default:return`(?:${F}|${G}+${F}${d?`|${F}${G}+`:""})*?`}}function n(a,d){if(!a)return[];const c=[];let P=!1,y=!1,T="";for(const z of a){switch(z){case d:if(!P&&!y){c.push(T),T="";continue}break;case"{":P=!0;break;case"}":P=!1;break;case"[":y=!0;break;case"]":y=!1;break}T+=z}return T&&c.push(T),c}e.$Vj=n;function u(a){if(!a)return"";let d="";const c=n(a,e.$Uj);if(c.every(P=>P===e.$Tj))d=".*";else{let P=!1;c.forEach((y,T)=>{if(y===e.$Tj){if(P)return;d+=f(2,T===c.length-1)}else{let z=!1,g="",k=!1,K="";for(const q of y){if(q!=="}"&&z){g+=q;continue}if(k&&(q!=="]"||!K)){let L;q==="-"?L=q:(q==="^"||q==="!")&&!K?L="^":q===e.$Uj?L="":L=(0,B.$Xe)(q),K+=L;continue}switch(q){case"{":z=!0;continue;case"[":k=!0;continue;case"}":{const p=`(?:${n(g,",").map(se=>u(se)).join("|")})`;d+=p,z=!1,g="";break}case"]":{d+="["+K+"]",k=!1,K="";break}case"?":d+=G;continue;case"*":d+=f(1);continue;default:d+=(0,B.$Xe)(q)}}T<c.length-1&&(c[T+1]!==e.$Tj||T+2<c.length)&&(d+=F)}P=y===e.$Tj})}return d}const m=/^\*\*\/\*\.[\w\.-]+$/,R=/^\*\*\/([\w\.-]+)\/?$/,D=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,b=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,Q=/^\*\*((\/[\w\.-]+)+)\/?$/,ne=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,j=new v.$Dc(1e4),U=function(){return!1},I=function(){return null};function Z(a,d){if(!a)return I;let c;typeof a!="string"?c=a.pattern:c=a,c=c.trim();const P=`${c}_${!!d.trimForExclusions}`;let y=j.get(P);if(y)return _(y,a);let T;return m.test(c)?y=o(c.substr(4),c):(T=R.exec(s(c,d)))?y=C(T[1],c):(d.trimForExclusions?b:D).test(c)?y=S(c,d):(T=Q.exec(s(c,d)))?y=V(T[1].substr(1),c,!0):(T=ne.exec(s(c,d)))?y=V(T[1],c,!1):y=W(c),j.set(P,y),_(y,a)}function _(a,d){if(typeof d=="string")return a;const c=function(P,y){return(0,H.$fg)(P,d.base,!M.$k)?a((0,B.$3e)(P.substr(d.base.length),$.sep),y):null};return c.allBasenames=a.allBasenames,c.allPaths=a.allPaths,c.basenames=a.basenames,c.patterns=a.patterns,c}function s(a,d){return d.trimForExclusions&&a.endsWith("/**")?a.substr(0,a.length-2):a}function o(a,d){return function(c,P){return typeof c=="string"&&c.endsWith(a)?d:null}}function C(a,d){const c=`/${a}`,P=`\\${a}`,y=function(z,g){return typeof z!="string"?null:g?g===a?d:null:z===a||z.endsWith(c)||z.endsWith(P)?d:null},T=[a];return y.basenames=T,y.patterns=[d],y.allBasenames=T,y}function S(a,d){const c=J(a.slice(1,-1).split(",").map(g=>Z(g,d)).filter(g=>g!==I),a),P=c.length;if(!P)return I;if(P===1)return c[0];const y=function(g,k){for(let K=0,q=c.length;K<q;K++)if(c[K](g,k))return a;return null},T=c.find(g=>!!g.allBasenames);T&&(y.allBasenames=T.allBasenames);const z=c.reduce((g,k)=>k.allPaths?g.concat(k.allPaths):g,[]);return z.length&&(y.allPaths=z),y}function V(a,d,c){const P=$.sep===$.$gc.sep,y=P?a:a.replace(w,$.sep),T=$.sep+y,z=$.$gc.sep+a;let g;return c?g=function(k,K){return typeof k=="string"&&(k===y||k.endsWith(T)||!P&&(k===a||k.endsWith(z)))?d:null}:g=function(k,K){return typeof k=="string"&&(k===y||!P&&k===a)?d:null},g.allPaths=[(c?"*/":"./")+a],g}function W(a){try{const d=new RegExp(`^${u(a)}$`);return function(c){return d.lastIndex=0,typeof c=="string"&&d.test(c)?a:null}}catch{return I}}function Y(a,d,c){return!a||typeof d!="string"?!1:ue(a)(d,void 0,c)}e.$Wj=Y;function ue(a,d={}){if(!a)return U;if(typeof a=="string"||le(a)){const c=Z(a,d);if(c===I)return U;const P=function(y,T){return!!c(y,T)};return c.allBasenames&&(P.allBasenames=c.allBasenames),c.allPaths&&(P.allPaths=c.allPaths),P}return N(a,d)}e.$Xj=ue;function le(a){const d=a;return d?typeof d.base=="string"&&typeof d.pattern=="string":!1}e.$Yj=le;function ie(a){return a.allBasenames||[]}e.$Zj=ie;function he(a){return a.allPaths||[]}e.$1j=he;function N(a,d){const c=J(Object.getOwnPropertyNames(a).map(g=>ee(g,a[g],d)).filter(g=>g!==I)),P=c.length;if(!P)return I;if(!c.some(g=>!!g.requiresSiblings)){if(P===1)return c[0];const g=function(q,L){let p;for(let se=0,fe=c.length;se<fe;se++){const l=c[se](q,L);if(typeof l=="string")return l;(0,O.$3g)(l)&&(p||(p=[]),p.push(l))}return p?(async()=>{for(const se of p){const fe=await se;if(typeof fe=="string")return fe}return null})():null},k=c.find(q=>!!q.allBasenames);k&&(g.allBasenames=k.allBasenames);const K=c.reduce((q,L)=>L.allPaths?q.concat(L.allPaths):q,[]);return K.length&&(g.allPaths=K),g}const y=function(g,k,K){let q,L;for(let p=0,se=c.length;p<se;p++){const fe=c[p];fe.requiresSiblings&&K&&(k||(k=(0,$.$nc)(g)),q||(q=k.substr(0,k.length-(0,$.$oc)(g).length)));const l=fe(g,k,q,K);if(typeof l=="string")return l;(0,O.$3g)(l)&&(L||(L=[]),L.push(l))}return L?(async()=>{for(const p of L){const se=await p;if(typeof se=="string")return se}return null})():null},T=c.find(g=>!!g.allBasenames);T&&(y.allBasenames=T.allBasenames);const z=c.reduce((g,k)=>k.allPaths?g.concat(k.allPaths):g,[]);return z.length&&(y.allPaths=z),y}function ee(a,d,c){if(d===!1)return I;const P=Z(a,c);if(P===I)return I;if(typeof d=="boolean")return P;if(d){const y=d.when;if(typeof y=="string"){const T=(z,g,k,K)=>{if(!K||!P(z,g))return null;const q=y.replace("$(basename)",()=>k),L=K(q);return(0,O.$3g)(L)?L.then(p=>p?a:null):L?a:null};return T.requiresSiblings=!0,T}}return P}function J(a,d){const c=a.filter(g=>!!g.basenames);if(c.length<2)return a;const P=c.reduce((g,k)=>{const K=k.basenames;return K?g.concat(K):g},[]);let y;if(d){y=[];for(let g=0,k=P.length;g<k;g++)y.push(d)}else y=c.reduce((g,k)=>{const K=k.patterns;return K?g.concat(K):g},[]);const T=function(g,k){if(typeof g!="string")return null;if(!k){let q;for(q=g.length;q>0;q--){const L=g.charCodeAt(q-1);if(L===47||L===92)break}k=g.substr(q)}const K=P.indexOf(k);return K!==-1?y[K]:null};T.basenames=P,T.patterns=y,T.allBasenames=P;const z=a.filter(g=>!g.basenames);return z.push(T),z}function ce(a,d){return(0,E.$ub)(a,d,(c,P)=>typeof c=="string"&&typeof P=="string"?c===P:typeof c!="string"&&typeof P!="string"?c.base===P.base&&c.pattern===P.pattern:!1)}e.$2j=ce}),define(ae[14],oe([0,1,22]),function(re,e,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Qmc=void 0;const O=(H,v,$)=>{let M;if(H[0]===255&&H[1]===254)M=new TextDecoder("utf-16le").decode(H);else if(H[0]===254&&H[1]===255)M=new TextDecoder("utf-16be").decode(H);else if(M=new TextDecoder("utf8").decode(H),M.slice(0,1e3).includes("\uFFFD")&&H.includes(0))return[];const B=[],X=[];let F=null,G=$.remainingResultQuota;for(;G>=0&&(F=v.exec(M));)X.push({matchStartIndex:F.index,matchedText:F[0]}),G--;if(X.length){const w=new Set,f=new Set,n=[],u=Q=>M.slice(n[Q].start,n[Q].end);let m=0,R=null;const D=/\r?\n/g;for(;R=D.exec(M);)n.push({start:m,end:R.index}),m=R.index+R[0].length;m<M.length&&n.push({start:m,end:M.length});let b=0;for(const{matchStartIndex:Q,matchedText:ne}of X){if(G<0)break;for(;n[b+1]&&Q>n[b].end;)b++;let j=b;for(;n[j+1]&&Q+ne.length>n[j].end;)j++;if($.beforeContext)for(let o=Math.max(0,b-$.beforeContext);o<b;o++)w.add(o);let U="",I=0;for(let o=b;o<=j;o++){let C=u(o);$.previewOptions?.charsPerLine&&C.length>$.previewOptions.charsPerLine&&(I=Math.max(Q-n[b].start-20,0),C=C.substr(I,$.previewOptions.charsPerLine)),U+=`${C}
`,f.add(o)}const Z=new E.$6s(b,Q-n[b].start,j,Q+ne.length-n[j].start),_=new E.$6s(0,Q-n[b].start-I,j-b,Q+ne.length-n[j].start-(j===b?I:0)),s={ranges:Z,preview:{text:U,matches:_}};if(B.push(s),$.afterContext)for(let o=j+1;o<=Math.min(j+$.afterContext,n.length-1);o++)w.add(o)}for(const Q of w)f.has(Q)||B.push({text:u(Q),lineNumber:Q+1})}return B};e.$Qmc=O}),define(ae[15],oe([0,1,9]),function(re,e,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Klb=void 0;class O{constructor(v,$,M){if(this.b=$,this.c=M,$[$.length-1]==="\\")throw Error("Unexpected path format, do not use trailing backslashes");$[$.length-1]!=="/"&&($+="/"),this.a=this.e(v,this.b,this.c)}updateContents(v){this.a=this.e(v,this.b,this.c)}isPathIncludedInTraversal(v,$){if(v[0]!=="/"||v[v.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+v);return!this.a(v,$)}isArbitraryPathIgnored(v,$){if(v[0]!=="/"||v[v.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+v);const M=v.split("/").filter(F=>F);let B=!1,X="";for(let F=0;F<M.length;F++){const G=F===M.length-1,w=M[F];if(X=X+"/"+w,!this.isPathIncludedInTraversal(X,G?$:!0)){B=!0;break}}return B}d(v,$,M){const B=v.map(F=>this.f(F,$)),X=Object.create(null);for(const F of B)X[F]=!0;return E.$Xj(X,{trimForExclusions:M})}e(v,$,M){const B=v.split(`
`).map(b=>b.trim()).filter(b=>b&&b[0]!=="#"),X=B.filter(b=>!b.endsWith("/")),F=X.filter(b=>!b.includes("!")),G=this.d(F,$,!0),w=X.filter(b=>b.includes("!")).map(b=>b.replace(/!/g,"")),f=this.d(w,$,!1),n=B.filter(b=>!b.includes("!")),u=this.d(n,$,!0),m=B.filter(b=>b.includes("!")).map(b=>b.replace(/!/g,"")),R=this.d(m,$,!1);return(b,Q)=>b.startsWith($)?Q&&u(b)&&!R(b)||G(b)&&!f(b)?!0:M?M.a(b,Q):!1:!1}f(v,$){const M=v.indexOf("/");return M===-1||M===v.length-1?v="**/"+v:(M===0?$.slice(-1)==="/"&&(v=v.slice(1)):$.slice(-1)!=="/"&&(v="/"+v),v=$+v),v}}e.$Klb=O}),define(ae[23],oe([0,1,9,6,4,13,14,15,3,8,7]),function(re,e,E,O,H,v,$,M,B,X,F){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LocalFileSearchSimpleWorker=e.create=void 0;const G=!1,w=+new Date,f={},n=async(j,U)=>{if(!G)return U();const I=Date.now(),Z=(f[j]??0)+1;console.info(j,Z,"starting",Math.round((I-w)*10)/1e4),f[j]=Z;const _=await U(),s=Date.now();return console.info(j,Z,"took",s-I),_};function u(j){return new m(j)}e.create=u;class m{constructor(U){this.d=U,this.cancellationTokens=new Map}cancelQuery(U){this.cancellationTokens.get(U)?.cancel()}g(U){const I=new v.$ce;return this.cancellationTokens.set(U,I),I}async listDirectory(U,I,Z,_,s){const o=D(Z),C=new F.$Gg(()=>_),S=this.g(s),V=[];let W=!1,Y=0;const ue=I.maxResults||512,le=I.filePattern?ie=>I.filePattern.split("").every(he=>ie.includes(he)):ie=>!0;return await n("listDirectory",()=>this.h(U,b(I),o,C,ie=>{if(le(ie.name))return Y++,ue&&Y>ue&&(W=!0,S.cancel()),V.push(ie.path)},S.token)),{results:V,limitHit:W}}async searchDirectory(U,I,Z,_,s){const o=D(Z),C=new F.$Gg(()=>_);return n("searchInFiles",async()=>{const S=this.g(s),V=[],W=R(I.contentPattern),Y=[];let ue=0,le=0;const ie=!1,he=async N=>{if(S.token.isCancellationRequested)return;ue++;const ee=await N.resolve();if(S.token.isCancellationRequested)return;const J=new Uint8Array(ee),ce=(0,$.$Qmc)(J,W,{afterContext:I.afterContext??0,beforeContext:I.beforeContext??0,previewOptions:I.previewOptions,remainingResultQuota:I.maxResults?I.maxResults-le:1e4});if(ce.length){le+=ce.length,I.maxResults&&le>I.maxResults&&S.cancel();const a={resource:O.URI.joinPath(o.folder,N.path),results:ce};this.d.sendTextSearchMatch(a,s),V.push(a)}};return await n("walkFolderToResolve",()=>this.h(U,b(I),o,C,async N=>Y.push(he(N)),S.token)),await n("resolveOngoingProcesses",()=>Promise.all(Y)),G&&console.log("Searched in",ue,"files"),{results:V,limitHit:ie}})}async h(U,I,Z,_,s,o){const C=E.$Xj(Z.excludePattern??{},{trimForExclusions:!0}),S=(N,ee,J)=>(N=N.slice(1),!!(C(N,ee,J)||Q(I,N))),V=(N,ee,J)=>(N=N.slice(1),!(C(N,ee,J)||!ne(I,N,_))),W=(N,ee)=>({type:"file",name:N.name,path:ee,resolve:()=>N.getFile().then(ce=>ce.arrayBuffer())}),Y=N=>N.kind==="directory",ue=N=>N.kind==="file",le=async(N,ee,J)=>{if(!Z.disregardIgnoreFiles){const a=await Promise.all([N.getFileHandle(".gitignore").catch(d=>{}),N.getFileHandle(".ignore").catch(d=>{})]);await Promise.all(a.map(async d=>{if(!d)return;const c=new TextDecoder("utf8").decode(new Uint8Array(await(await d.getFile()).arrayBuffer()));J=new M.$Klb(c,ee,J)}))}const ce=X.Promises.withAsyncBody(async a=>{const d=[],c=[],P=[],y=new Set;for await(const T of N.entries())P.push(T),y.add(T[0]);for(const[T,z]of P){if(o.isCancellationRequested)break;const g=ee+T;if(J&&!J.isPathIncludedInTraversal(g,z.kind==="directory"))continue;const k=K=>y.has(K);Y(z)&&!S(g,T,k)?c.push(le(z,g+"/",J)):ue(z)&&V(g,T,k)&&d.push(W(z,g))}a([...await Promise.all(c),...d])});return{type:"dir",name:N.name,entries:ce}},ie=async(N,ee)=>{o.isCancellationRequested||await Promise.all((await N.entries).sort((J,ce)=>-(J.type==="dir"?0:1)+(ce.type==="dir"?0:1)).map(async J=>J.type==="dir"?ie(J,ee):ee(J)))},he=await n("process",()=>le(U,"/"));await n("resolve",()=>ie(he,s))}}e.LocalFileSearchSimpleWorker=m;function R(j){return(0,B.$7e)(j.pattern,!!j.isRegExp,{wholeWord:j.isWordMatch,global:!0,matchCase:j.isCaseSensitive,multiline:!0,unicode:!0})}function D(j){return{...j,folder:O.URI.revive(j.folder)}}function b(j){return{...j,extraFileResources:j.extraFileResources?.map(U=>O.URI.revive(U)),folderQueries:j.folderQueries.map(U=>D(U))}}function Q(j,U){return!!(j.excludePattern&&E.$Wj(j.excludePattern,U))}function ne(j,U,I){return j.excludePattern&&E.$Wj(j.excludePattern,U)?!1:j.includePattern||j.usingSearchPaths?j.includePattern&&E.$Wj(j.includePattern,U)?!0:j.usingSearchPaths?!!j.folderQueries&&j.folderQueries.some(Z=>{const _=Z.folder,s=O.URI.file(U);if(I.isEqualOrParent(s,_)){const o=H.$lc(_.path,s.path);return!Z.includePattern||!!E.$Wj(Z.includePattern,o)}else return!1}):!1:!0}})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/01ce8d869e4220577e194b2dd57bfa12437dfcf5/core/vs/workbench/services/search/worker/localFileSearch.js.map
